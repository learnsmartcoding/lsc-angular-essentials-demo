<div class="container py-4">
  <div class="card shadow border-0 mb-5 text-white bg-dark">
    <div class="card-header bg-secondary p-3">
      <h3 class="mb-0">
        <i class="bi bi-arrow-left-right"></i> RxJS &amp; Signals Bridge
      </h3>
    </div>

    <div class="card-body p-4 bg-white text-dark">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h4>User Directory</h4>
        <span
          class="badge"
          [class.bg-warning]="users().length === 0"
          [class.bg-success]="users().length > 0"
        >
          {{
            users().length === 0
              ? 'Loading from API...'
              : 'Data Synchronized'
          }}
        </span>
      </div>

      <ul class="list-group list-group-flush">
        @for (user of users(); track user.id) {
          <li
            class="list-group-item d-flex justify-content-between align-items-center"
          >
            <div>
              <div class="fw-bold">{{ user.name }}</div>
              <small class="text-muted">{{ user.email }}</small>
            </div>
            <i class="bi bi-person-check-fill text-success"></i>
          </li>
        } @empty {
          <div class="text-center p-5">
            <div class="spinner-border text-primary" role="status"></div>
            <p class="mt-3">
              Fetching data using <strong>toSignal()</strong>...
            </p>
          </div>
        }
      </ul>
    </div>
  </div>

  <div class="mt-5 pt-3">
    <div class="d-flex align-items-center mb-4">
      <div class="bg-secondary text-white p-2 rounded me-3">
        <i class="bi bi-shuffle fs-4"></i>
      </div>
      <h3 class="mb-0 fw-bold">
        Reference: Interoperability Functions
      </h3>
    </div>

    <div class="accordion shadow-sm" id="interopRef">

      <!-- toSignal -->
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button
            class="accordion-button collapsed py-3"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#refToSignal"
          >
            <strong>toSignal(observable)</strong>
          </button>
        </h2>
        <div
          id="refToSignal"
          class="accordion-collapse collapse"
          data-bs-parent="#interopRef"
        >
          <div class="accordion-body bg-light">
            <p>
              Converts an RxJS Observable into a Signal. It automatically
              subscribes and handles unsubscription when the component is
              destroyed.
            </p>
            <div class="bg-white border rounded p-3">
              <pre class="mb-0">
<code>data = toSignal(http.get('/api'), &#123; initialValue: [] &#125;);</code>
              </pre>
            </div>
          </div>
        </div>
      </div>

      <!-- toObservable -->
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button
            class="accordion-button collapsed py-3"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#refToObs"
          >
            <strong>toObservable(signal)</strong>
          </button>
        </h2>
        <div
          id="refToObs"
          class="accordion-collapse collapse"
          data-bs-parent="#interopRef"
        >
          <div class="accordion-body bg-light">
            <p>
              Converts a Signal back into an Observable. Use this when you need
              RxJS operators like <code>debounceTime</code> or
              <code>switchMap</code> on a value that starts as a Signal.
            </p>
            <div class="bg-white border rounded p-3">
              <pre class="mb-0">
<code>search$ = toObservable(mySearchSignal);</code>
              </pre>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
